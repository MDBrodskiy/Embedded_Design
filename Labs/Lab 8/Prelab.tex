%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Written By Michael Brodskiy
% Class: Embedded Design: Enabling Robotics
% Professor: S. Shazli
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\include{Includes.tex}

\title{Lab 8 Pre-Lab Submission}
\date{\today}
\author{Michael Brodskiy\\ \small Professor: S. Shazli}

\begin{document}

\maketitle

\begin{enumerate}

  \item Existing Functions:

    \begin{enumerate}

      \item \texttt{char *Initialize(int *fd)}

        First and foremost, \texttt{Initialize()} points the \texttt{fd} pointer at the location of a physical device in memory, and gives it read, write, and synchronization access. Next, an \texttt{if} statement checks for the possibility of errors; that is, if the pointer \texttt{fd} is equal to -1, then an error is printed, and the program exits with exit code 1 (error). The physical device is then mapped to a virtual device, and given a virtual memory address, using the \texttt{mmap()} function. Another \texttt{if} statement then checks whether the memory mapping was successful or not; if yes, the virtual memory location of the device is returned. Otherwise, an error is printed, the \texttt{fd} pointer connection to memory is closed, and exit code 1 is returned.

      \item \texttt{void Finalize(char *pBase, int fd)}

        The \texttt{Finalize()} function checks whether the device attached to the memory address pointer \texttt{pBase} is successfully unmapped from memory. If successful, it closes the connection to the device using address \texttt{fd}. Otherwise, an error is printed, and exit code 1 is returned.

      \item \texttt{int RegisterRead(char *pBase, unsigned int reg\_offset)}

        By combining the base address pointer \texttt{pBase} and the device mapping offset value (\texttt{reg\_offset}), the value that is read from the device at the memory address \texttt{pBase} is returned by \texttt{RegisterRead()}.

      \item \texttt{void RegisterWrite(char *pBase, unsigned int reg\_offset, int value)}

        Similar to \texttt{RegisterRead()}, \texttt{RegisterWrite} combines the base address pointer \texttt{pBase} and the device mapping offset, \texttt{reg\_offset}, to find the device, and then assigns a specified value to that address.

    \end{enumerate}

  \item Writing a switch read function:

   \lstinputlisting[
    caption=Switch Reading Code, % Caption above the listing
    label=lst:L1, % Label for referencing this listing
    language=C++, % Use C++ functions/syntax highlighting
    frame=single, % Frame around the code listing
    showstringspaces=false, % Don't put marks in string spaces
    numbers=left, % Line numbers on left
    numberstyle=\tiny, % Line numbers styling
    backgroundcolor=\color{black!5}, % Set background color
    keywordstyle=\color{magenta!80}, % Set keyword color
    commentstyle=\color{blue!80}, % Set comment color
    stringstyle=\color{green!80}, % Set string color
    breaklines=true
  ]{Code/partb.cpp}

\item Writing a switch write function:

 \lstinputlisting[
    caption=Switch Writing Code, % Caption above the listing
    label=lst:L2, % Label for referencing this listing
    language=C++, % Use C++ functions/syntax highlighting
    frame=single, % Frame around the code listing
    showstringspaces=false, % Don't put marks in string spaces
    numbers=left, % Line numbers on left
    numberstyle=\tiny, % Line numbers styling
    backgroundcolor=\color{black!5}, % Set background color
    keywordstyle=\color{magenta!80}, % Set keyword color
    commentstyle=\color{blue!80}, % Set comment color
    stringstyle=\color{green!80}, % Set string color
    breaklines=true
  ]{Code/partc.cpp}

\end{enumerate}

\end{document}

